import{p as w,x as L,w as j}from"./chunk-EPOLDU6W-CyFp4JB8.js";import{z as r,o as b,i as y,c as _,f as B,a as I,b as A}from"./fetcher-scheme-CNYqZB-D.js";import{C}from"./card-layout-CWmPtzoL.js";import{j as T}from"./ja-BCf0BCoW.js";import"./box-C4eT95C-.js";const M=r.array(r.object({id:r.string(),name:r.string(),alternate_names:r.array(r.string()),species:r.string(),gender:r.enum(["male","female",""]),house:r.string(),dateOfBirth:r.string().nullable(),yearOfBirth:r.number().nullable(),wizard:r.boolean(),ancestry:r.string(),eyeColour:r.string(),hairColour:r.string(),wand:r.object({wood:r.string(),core:r.string(),length:r.number().nullable()}),patronus:r.string(),hogwartsStudent:r.boolean(),hogwartsStaff:r.boolean(),actor:r.string(),alternate_actors:r.array(r.string()),alive:r.boolean(),image:r.string()}).strict()),x={RESULT_OK:"ok",RESULT_NG:"ng"},z=Symbol("UNIT_SYMBOL"),k=(function(){const{RESULT_NG:t,RESULT_OK:h}=x,a=Object.freeze({_unit:z}),i=async({fn:e,err:o})=>{try{const n=await e();return c(n)}catch(n){return o(n)}},u=async({fn:e,err:o})=>{try{return await e(),c(a)}catch(n){return o(n)}},s=({fn:e,err:o})=>{try{const n=e();return c(n)}catch(n){return o(n)}},l=({fn:e,err:o})=>{try{return e(),c(a)}catch(n){return o(n)}},c=e=>Object.freeze({kind:h,isOk:!0,isErr:!1,value:e});return Object.freeze({UNIT:a,checkResultReturn:s,checkResultVoid:l,checkPromiseReturn:i,checkPromiseVoid:u,createOk:c,createNg:e=>Object.freeze({kind:t,isOk:!1,isErr:!0,err:e})})})();function H(t){const{createOk:h}=k,{createNone:a,createSome:i}=b,u=t.filter(s=>s.image!=="").map(s=>{const{alternate_names:l,alternate_actors:c,dateOfBirth:d,yearOfBirth:e,wand:o,...n}=s;return{...n,alternateNames:l,alternateActors:c,dateOfBirth:y(d)?a():i(d),yearOfBirth:y(e)?a():i(e),wand:{wood:o.wood,core:o.core,length:y(o.length)?a():i(o.length)}}});return h(i(u))}const V=(function(){const{returnBadRequest:t,returnNoPermission:h,returnNotFoundAPIUrl:a,returnInternalServerError:i}=_,{fetchErrorMessage:u,fetcherErrorStatusScheme:s,httpErrorStatusResponse:l}=B,c=({status:E,errorMessage:p})=>({type:"fetcherError",status:E,message:p}),d=(function(){return c({status:s.returnNotSetAPIUrl,errorMessage:u.returnNotSetAPIUrl})})(),e=(function(){return c({status:s.returnSchemeError,errorMessage:u.returnSchemeError})})(),o=(function(){return c({status:s.returnParseError,errorMessage:u.returnParseError})})(),n=(function(){return c({status:s.returnFetchFunctionError,errorMessage:u.returnFetchFunctionError})})(),g=(function(){return c({status:s.returnUnknownError,errorMessage:u.returnUnknownError})})();return{httpErrorStatusResponse:l,returnNoPermission:h,returnNotFoundAPIUrl:a,returnBadRequest:t,returnUnknownError:g,returnNotSetApiUrl:d,returnSchemeError:e,returnParseError:o,returnFetchFunctionError:n,returnInternalServerError:i}})();async function q({url:t,scheme:h,cache:a}){const{notFound:i,forbidden:u,badRequest:s,internalServerError:l}=I.httpErrorStatusResponse,{returnNotSetApiUrl:c,returnNotFoundAPIUrl:d,returnNoPermission:e,returnBadRequest:o,returnSchemeError:n,returnUnknownError:g,returnFetchFunctionError:E,returnInternalServerError:p}=V,{createNone:P,createSome:F}=b,{createNg:f,createOk:N,checkPromiseReturn:R}=k;if(t.isNone)return f(c);const m=await R({fn:()=>fetch(t.value,{cache:a}),err:U=>(console.error(U),f(E))});if(m.isErr)return m;if(!m.value.ok)switch(m.value.status){case i:return f(d);case u:return f(e);case s:return f(o);case l:return f(p);default:return f(g)}const v=await m.value.json(),O=h.safeParse(v);if(O.error!==void 0)return f(n);const S=O.data;return S==null?N(P()):N(F(S))}async function K({url:t,scheme:h,cache:a,parse:i}){const{createOk:u}=k,{createNone:s}=b,l=await q({url:t,scheme:h,cache:a});return l.isErr?l:l.value.isNone?u(s()):i(l.value.value)}async function G(t){return await K({url:A.apiKey,scheme:M,cache:t,parse:H})}function Y({characters:t}){return w.jsx(C,{characters:t,title:T.app.clientLoaderPotter.title})}function Z({}){return[{title:"client Loader"},{name:"description",content:"This is the client loader route."}]}async function $({}){return await G()}const rr=L(function(){return w.jsx("div",{children:"Loading..."})}),er=j(function({loaderData:h}){const a=h;return w.jsx(Y,{characters:a})});export{rr as HydrateFallback,$ as clientLoader,er as default,Z as meta};
